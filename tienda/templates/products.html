{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todos los Productos | Horuz Autopartes</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div class="container">
        <div class="navbar">
            <div class="logo">
                <a href="{% url 'index' %}"><img src="{% static 'images/logo.png' %}" alt="logo" width="125px"></a>
            </div>
            <nav>
                <ul id="MenuItems">
                    <li><a href="{% url 'index' %}">Inicio</a></li>
                    <li><a href="{% url 'catalogo' %}">Productos</a></li>
                    <li><a href="#">Sobre Nosotros</a></li>
                    <li><a href="#">Contacto</a></li>
                    <li><a href="{% url 'login' %}">Cuenta</a></li>
                </ul>
            </nav>
            <a href="{% url 'carrito' %}"><img src="{% static 'images/cart.png' %}" width="30px" height="30px"></a>
            <img src="{% static 'images/menu.png' %}" class="menu-icon" onclick="menutoggle()">
        </div>
    </div>

    <!-- Todos los Productos -->
    <div class="small-container">
        <div class="row row-2">
            <h2>Todos los Productos</h2>
            <select>
                <option>Orden Predeterminado</option>
                <option>Ordenar por Precio</option>
                <option>Ordenar por Popularidad</option>
                <option>Ordenar por Calificación</option>
                <option>Ordenar por Venta</option>
            </select>
        </div>

        <!-- Contenedor dinámico para productos -->
        <div class="row" id="product-container">
            <!-- Los productos se cargarán aquí mediante JavaScript -->
        </div>

        <div class="page-btn">
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>&#8594;</span>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col-1">
                    <h3>Descarga Nuestra App</h3>
                    <p>Descarga la app para Android y iOS.</p>
                    <div class="app-logo">
                        <img src="{% static 'images/play-store.png' %}">
                        <img src="{% static 'images/app-store.png' %}">
                    </div>
                </div>
                <div class="footer-col-2">
                    <img src="{% static 'images/logo-white.png' %}">
                    <p>Nuestro propósito es ofrecer autopartes de calidad a todos los amantes de los autos, asegurando
                        un viaje seguro y confortable.</p>
                </div>
                <div class="footer-col-3">
                    <h3>Enlaces Útiles</h3>
                    <ul>
                        <li>Cupones</li>
                        <li>Blog</li>
                        <li>Política de Devoluciones</li>
                        <li>Programa de Afiliados</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Síguenos</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>Youtube</li>
                    </ul>
                </div>
            </div>
            <hr>
            <p class="copyright">Copyright 2024 - Horuz Autopartes</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Función para alternar el menú en dispositivos móviles
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";
        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "200px"
            } else {
                MenuItems.style.maxHeight = "0px"
            }
        }

        // Función para cargar los productos desde el backend y mostrarlos en el contenedor
        async function cargarProductos() {
            try {
                // Realiza una solicitud GET a la ruta de productos de tu backend
                const response = await fetch('/api/yonkes/');
                const productos = await response.json();

                // Selecciona el contenedor de productos
                const productContainer = document.getElementById('product-container');
                productContainer.innerHTML = ''; // Limpia el contenedor antes de cargar los productos

                // Itera sobre los productos y crea el HTML para cada uno
                productos.forEach(producto => {
                    const productHTML = `
                        <div class="col-4">
                            <a href="{% url 'detalle_producto' producto.id %}"><img src="${producto.imagen}" alt="${producto.titulo}"></a>
                            <h4>${producto.titulo}</h4>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o"></i>
                            </div>
                            <p>$${producto.precio}</p>
                        </div>
                    `;
                    // Inserta el producto en el contenedor
                    productContainer.insertAdjacentHTML('beforeend', productHTML);
                });
            } catch (error) {
                console.error('Error al cargar los productos:', error);
            }
        }

        // Llama a la función para cargar los productos al cargar la página
        cargarProductos();
    </script>

</body>

</html>
